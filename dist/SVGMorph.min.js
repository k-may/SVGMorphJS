!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var n=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-n}}}();var MORPH=function(){var n=[];return{add:function(r){n.push(r)},update:function(r){if(0===n.length)return!1;var e=0,o=n.length;for(r=void 0!==r?r:window.performance.now();o>e;)n[e].update(r)?e++:(n.splice(e,1),o--);return!0},draw:function(r){for(var e=0,o=n.length;o>e;){var i=n[e++];i.draw(r)}},clear:function(){n=[]}}}();
MORPH.MorphableGroup=function(){var t=function(t,e){this._origSegs=t||[],this._destSegs=e||[],this._heteromorphic=t.length!=e.length,this._maxLength=Math.max(this._origSegs.length,this._destSegs.length),this._segs,this._startSegs,this._endSegs,this._interSeg,this.init()};return t.prototype={init:function(){if(this._heteromorphic)this._destSegs.length>1?this._interSeg=new MORPH.Segment(this._origSegs[0].pt1.Interpolate(this._destSegs[0].pt1,.5),null,this._origSegs[this._origSegs.length-1].pt2.Interpolate(this._destSegs[this._destSegs.length-1].pt2,.5),null):this._interSeg=this._destSegs[0].clone(),this._segs=this._startSegs=this.defineStartInterSegs();else if(this._segs=[],this._destSegs)for(var t=0;t<this._maxLength;t++)this._segs.push(new MORPH.MorphSegment(this._origSegs[t],this._destSegs[t]));else this._segs=this._origSegs},defineStartInterSegs:function(){var t,e,s,i=[];s=this._interSeg.pt1;for(var n=0;n<this._origSegs.length;){t=(n+1)/this._origSegs.length,e=s.clone(),s=this._interSeg.pt1.Interpolate(this._interSeg.pt2,t);var h=new MORPH.Segment(e,null,s,null);i.push(new MORPH.MorphSegment(this._origSegs[n],h)),n++}return i},defineEndInterSegs:function(){var t,e,s,i=[];s=this._interSeg.pt1;for(var n=0;n<this._destSegs.length;){t=(n+1)/this._destSegs.length,e=s.clone(),s=this._interSeg.pt1.Interpolate(this._interSeg.pt2,t);var h=new MORPH.Segment(e,null,s,null);i.push(new MORPH.MorphSegment(h,this._destSegs[n])),n++}return i},interpolateHetero:function(t){return t>=.5?(this._endSegs||(this._endSegs=this.defineEndInterSegs(this._interSeg.pt1,this._destSegs)),this._segs=this._endSegs):this._segs=this._startSegs,.5>t?t/.5:(t-.5)/.5},translate:function(t,e){function s(t,e,s){for(var i=0,i=0;i<t.length;i++)t[i].translate(e,s)}s(this._origSegs,t,e),destSegs&&s(this._destSegs,t,e),this.init()},interpolate:function(t){var e=[];this._heteromorphic&&this._destSegs.length>1&&(t=this.interpolateHetero(t));for(var s=0;s<this._segs.length;s++)e.push(this._segs[s].interpolate(t));return e}},t}();
MORPH.MorphableGroupParallel=function(){var t=function(){this._origSegs=origSegs||[],this._destSegs=destSegs||[],this._heteromorphic=!1,this._maxLength=Math.max(this._origSegs.length,this._destSegs.length),this._segs,this._startSegs,this._endSegs,this._interSeg};return t.prototype=MORPH.MorphableGroup.prototype,t.prototype.init=function(){},t}(),MORPH.MorphableGroupParallel.prototype=MORPH.MorphableGroup.prototype,MORPH.MorphableGroupParallel.prototype.init=function(){};
MORPH.Morph=function(t,e){function n(){r()}function r(){var t=0;if(p>1)for(o=[];o.length<p-1;){var e=MORPH.createMorphablePath(h[t].getSegments(),h[(t+1)%h.length].getSegments());o.push(e),t++}else o.push(h[0])}e=e||{};var i,h=t,s=0,o=[],l=0,a=e.duration||1e3,c=0,u=e.looping||!1,p=u?h.length+1:h.length,g=e.onComplete,M=0,f=0;return this.start=function(t){return i=void 0!==t?t:window.performance.now(),i+=c,MORPH.add(this),this},this.update=function(t){var e,n=0,r=Math.max(0,Math.min(1,(t-i)/a));return(e=this.setRatio(r))?(null!=g&&g(),u?(i=void 0!==t?t:window.performance.now(),s=0,l=0,!0):!1):(s=n,!0)},this.getCurrentPath=function(){return h[h.length-1]},this.setRatio=function(t){return l=t,p>1?(index=Math.floor(l*(p-1)),index>=p-1):l>=1},this.getCurrentRatio=function(){var t=l*(p-1)-s;return t},this.getCurrentMorphablePath=function(){return s<o.length?o[s]:void console.log("Error : something wrong here!")},this.getShape=function(){if(p>1)return this.currentShape();var t=h[0];return new MORPH.Shape(t.getSegments())},this.currentShape=function(){for(var t=this.getCurrentMorphablePath().morphableGroups,e=this.getCurrentRatio(),n=t.length,r=[],i=0;n>i;i++){var h=t[i],s=h.interpolate(e);r=r.concat(s)}return new MORPH.Shape(r)},this.onComplete=function(t){return _onCompleteCallback=t,this},this.setScale=function(t){for(var e=0;e<h.length;e++)h[e].setScale(t);return r(),this},this.getWidth=function(){for(var t=0,e=0;e<h.length;e++)h[e].width()>t&&(t=h[e].width());return t},this.getHeight=function(){for(var t=0,e=0;e<h.length;e++)h[e].height()>t&&(t=h[e].height());return t},this.setPos=function(t,e){M=t,f=e;for(var n=0;n<h.length;){var r=h[n];r.translate(t,e),n++}return this},n(),this},MORPH.createMorphablePath=function(t,e){for(var n=[],r=t.length,i=e.length,h=Math.min(r,i),s=0,o=0,l=0;h>l;l++){var a=[],c=[];if(i>r)for(s=l,a.push(t[s]);l+1>o*(r/i)&&i>o;)c.push(e[o]),o++;else for(o=l,c.push(e[o]);l+1>s*(i/r)&&r>s;)a.push(t[s]),s++;n.push(new MORPH.MorphableGroup(a,c))}return new MORPH.MorphablePath(n)},MORPH.MorphablePath=function(t){return{morphableGroups:t}},MORPH.Shape=function(t){var e=t||[];return{segmentCollection:e,length:t.length}},MORPH.Segment=function(t,e,n,r){this.pt1=null!==t?t.clone():new MORPH.GEOM.Point,this.pt2=null!==n?n.clone():new MORPH.GEOM.Point,this.ctrl2=r||this.pt2.clone(),this.ctrl1=e||this.pt1.clone(),this.interpolate=function(){},this.draw=function(t){t.bezier(this.pt1.x,this.pt1.y,this.ctrl1.x,this.ctrl1.y,this.ctrl2.x,this.ctrl2.y,this.pt2.x,this.pt2.y)},this.translate=function(t,e){this.pt1.translate(t,e),this.pt2.translate(t,e),this.ctrl1.translate(t,e),this.ctrl2.translate(t,e)},this.scale=function(t,e){var e=e||new MORPH.GEOM.Point(0,0),n=new MORPH.GEOM.Vector((this.ctrl1.x-this.pt1.x)*t,(this.ctrl1.y-this.pt1.y)*t),r=new MORPH.GEOM.Point((this.ctrl2.x-this.pt2.x)*t,(this.ctrl2.y-this.pt2.y)*t);this.pt1.x*=t,this.pt1.y*=t,this.pt2.x*=t,this.pt2.y*=t,this.ctrl1=new MORPH.GEOM.Point(this.pt1.x+n.x,this.pt1.y+n.y),this.ctrl2=new MORPH.GEOM.Point(this.pt2.x+r.x,this.pt2.y+r.y)},this.isCurve=function(){return!pt1.equals(e)&&!pt2.equals(r)},this.clone=function(){return new MORPH.Segment(this.pt1.clone(),this.ctrl1.clone(),this.pt2.clone(),this.ctrl2.clone())}},MORPH.MorphSegment=function(t,e){this.origSeg=t,this.destSeg=e,this.ctrlV1=new MORPH.GEOM.Vector(this.destSeg.ctrl1.x-this.origSeg.ctrl1.x,this.destSeg.ctrl1.y-this.origSeg.ctrl1.y),this.ctrlV2=new MORPH.GEOM.Vector(this.destSeg.ctrl2.x-this.origSeg.ctrl2.x,this.destSeg.ctrl2.y-this.origSeg.ctrl2.y),this.interpolate=function(t){var e=this.origSeg.pt1.Interpolate(this.destSeg.pt1,t),n=this.origSeg.pt2.Interpolate(this.destSeg.pt2,t),r=this.ctrlV1.Interpolate(t),i=new MORPH.GEOM.Point(r.x+this.origSeg.ctrl1.x,r.y+this.origSeg.ctrl1.y);r=this.ctrlV2.Interpolate(t);var h=new MORPH.GEOM.Point(r.x+this.origSeg.ctrl2.x,r.y+this.origSeg.ctrl2.y);return new MORPH.Segment(e,i,n,h)}};
MORPH.GEOM={Rectangle:function(t,n,e,i){this.x1=t,this.y1=n,this.w=e,this.h=i,this.width=function(){return this.w},this.height=function(){return this.h},this.scale=function(t){this.w=this.w*t,this.h=this.h*t},this.translate=function(t,n){this.x1+=t,this.y1+=n},this.clone=function(){return new MORPH.GEOM.Rectangle(this.x1,this.y1,this.w,this.h)}},Point:function(t,n){this.x=t||0,this.y=n||0,this.draw=function(t){t.ellipse(this.x,this.y,10,10)},this.clone=function(){var t=this.x,n=this.y;return new MORPH.GEOM.Point(t,n)},this.equals=function(t){return this.x==t.x&&this.y==t.y},this.trace=function(){return"{"+this.x+","+this.y+"}"},this.applyTransform=function(t){var n=this.x*t[0]+this.y*t[2]+t[4],e=this.x*t[1]+this.y*t[3]+t[5];this.x=n,this.y=e},this.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},this.Interpolate=function(t,n){var e=this.x+(t.x-this.x)*n,i=this.y+(t.y-this.y)*n;return new MORPH.GEOM.Point(e,i)},this.translate=function(t,n){var e=this.x+t,i=this.y+n;this.x=e,this.y=i}},RandomPoint:function(t,n){var e=Math.random()*t,i=Math.random()*n;return new MORPH.GEOM.Point(e,i)},Vector:function(t,n){this.x=t||0,this.y=n||0,this.Interpolate=function(t){return new MORPH.GEOM.Vector(this.x*t,this.y*t)}}},MORPH.LoadPaths=function(t){return MORPH.LoadSVG(t).then(function(t){return new Promise(function(n,e){for(var i=[],s=MORPH.SVG.getBoundingBox(t[0]),r=0;r<t.length;r++)for(var a=t[r].getElementsByTagName("svg")[0],h=a.getAttribute("id"),o=MORPH.SVG.getPathStrings(t[r]),u=0;u<o.length;u++){var c=new MORPH.PATH.Path({id:h+"_"+u,d:o[u]});c.setRectangle(s.clone()),i.push(c)}n(i)})})},MORPH.LoadSVG=function(t){return new Promise(function(n,e){function i(e){r.push(e),t.length?s(t.shift()):n(r)}function s(t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&i(n.responseXML)},n.open("GET",t,!0),n.send()}var r=[];s(t.shift())})},MORPH.SVG={getBoundingBox:function(t){var n=t.getElementsByTagName("svg")[0],e=n.attributes,i=MORPH.SVG.getNodeValue(e,"x"),s=MORPH.SVG.getNodeValue(e,"y"),r=MORPH.SVG.getNodeValue(e,"width")||100,a=MORPH.SVG.getNodeValue(e,"height")||100;return new MORPH.GEOM.Rectangle(i,s,r,a)},getNodeValue:function(t,n){return t[n]?parseInt(t[n].nodeValue):null},getPathStrings:function(t){var n,e=[],i=t.getElementsByTagName("path");for(n=0;n<i.length;n++)e.push(i[n].getAttribute("d"));var s=t.getElementsByTagName("line");for(n=0;n<s.length;n++){var r=s[n].getAttribute("x1"),a=s[n].getAttribute("x2"),h=s[n].getAttribute("y1"),o=s[n].getAttribute("y2");e.push("M"+r+" "+h+" L"+a+" "+o)}var u=t.getElementsByTagName("polyline");for(n=0;n<u.length;n++){var c=u[n].getAttribute("points");c=c.replace(/\s\s+/g," "),c=c.split(" ");for(var l=c.shift().split(","),d=parseFloat(l[0]),M=parseFloat(l[1]),g="M"+d+" "+M+" ";c.length;)l=c.shift().split(","),l.length&&(d=parseFloat(l[0]),M=parseFloat(l[1]),g+="L "+d+" "+M+" ");g=g.substr(0,g.length-2),e.push(g)}return e}},MORPH.PATH={BoundingBox:function(t,n,e,s){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.scale=function(t){this.x2=this.x1+this.width()*t,this.y2=this.y1+this.height()*t},this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,n){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=n&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=n,this.y2=n),n<this.y1&&(this.y1=n),n>this.y2&&(this.y2=n))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,n,e,i,s,r){var a=t+2/3*(e-t),h=n+2/3*(i-n),o=a+1/3*(s-t),u=h+1/3*(r-n);this.addBezierCurve(t,n,a,o,h,u,s,r)},this.addBezierCurve=function(t,n,e,s,r,a,h,o){var u=[t,n],c=[e,s],l=[r,a],d=[h,o];for(this.addPoint(u[0],u[1]),this.addPoint(d[0],d[1]),i=0;i<=1;i++){var M=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*c[i]+3*(1-t)*Math.pow(t,2)*l[i]+Math.pow(t,3)*d[i]},g=6*u[i]-12*c[i]+6*l[i],P=-3*u[i]+9*c[i]-9*l[i]+3*d[i],f=3*c[i]-3*u[i];if(0!=P){var y=Math.pow(g,2)-4*f*P;if(!(0>y)){var x=(-g+Math.sqrt(y))/(2*P);x>0&&1>x&&(0==i&&this.addX(M(x)),1==i&&this.addY(M(x)));var m=(-g-Math.sqrt(y))/(2*P);m>0&&1>m&&(0==i&&this.addX(M(m)),1==i&&this.addY(M(m)))}}else{if(0==g)continue;var O=-f/g;O>0&&1>O&&(0==i&&this.addX(M(O)),1==i&&this.addY(M(O)))}}},this.isPointInBox=function(t,n){return this.x1<=t&&t<=this.x2&&this.y1<=n&&n<=this.y2},this.addPoint(t,n),this.addPoint(e,s)},PathParser:function(t){var n=t||"";this.tokens=n.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new MORPH.GEOM.Point(0,0),this.control=new MORPH.GEOM.Point(0,0),this.current=new MORPH.GEOM.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new MORPH.GEOM.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()?this.current:new MORPH.GEOM.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,n,e){null!=e&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(e)),this.addMarkerAngle(t,null==n?null:n.angleTo(t))},this.addMarkerAngle=function(t,n){this.points.push(t),this.angles.push(n)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var n=t+1;n<this.angles.length;n++)if(null!=this.angles[n]){this.angles[t]=this.angles[n];break}return this.angles}},Path:function(t){this.id=t.id||"";var n,e=t.d,i=[],s=[],r=new MORPH.PATH.BoundingBox;this.clone=function(){var t=new Path({d:e});return t.setRectangle(n.clone()),t.name=this.name,t},this.translate=function(t,e){for(var s=0;s<i.length;s++){var r=i[s];r.translate(t,e)}n.translate(t,e)},this.setScale=function(t){for(var e=0;e<i.length;e++){var s=i[e];s.scale(t,new Point(0,0))}n.scale(t)},this.setRectangle=function(t){n=t},this.width=function(){return n.width()},this.height=function(){return n.height()},this.setSegments=function(t){for(var n=[],e=0;e<t.length;e++)n=t[e].clone()},this.getSegments=function(){for(var t=[],n=0;n<i.length;n++)t.push(i[n].clone());return t};var a=function(){return s[s.length-1].clone()},h=function(){return 0==s.length},o=function(t,n){var e=new MORPH.GEOM.Point(t,n);h()||c(a(),e),s.push(e)},u=function(t,n,e){var i=a();l(i,t,e,n),s.push(e)},c=function(t,n){i.push(new MORPH.Segment(t,t,n,n))},l=function(t,n,e,s){i.push(new MORPH.Segment(t,n,e,s))};e=e.replace(/,/gm," "),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2"),e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=e.replace(/[\s\r\t\n]+/gm," "),e=e.replace(/^\s+|\s+$/g,"");var d=new MORPH.PATH.PathParser(e);for(d.reset();!d.isEnd();)switch(d.nextCommand(),d.command){case"M":case"m":var M=d.getAsCurrentPoint();for(d.addMarker(M),o(M.x,M.y),r.addPoint(M.x,M.y),d.start=d.current;!d.isCommandOrEnd();){var M=d.getAsCurrentPoint();d.addMarker(M,d.start),o(M.x,M.y),r.addPoint(M.x,M.y)}break;case"L":case"l":for(;!d.isCommandOrEnd();){var g=d.current,M=d.getAsCurrentPoint();d.addMarker(M,g),o(M.x,M.y),r.addPoint(M.x,M.y)}break;case"H":case"h":for(;!d.isCommandOrEnd();){var P=new MORPH.GEOM.Point((d.isRelativeCommand()?d.current.x:0)+d.getScalar(),d.current.y);d.addMarker(P,d.current),d.current=P,o(P.x,P.y),r.addPoint(d.current.x,d.current.y)}break;case"V":case"v":for(;!d.isCommandOrEnd();){var P=new MORPH.GEOM.Point(d.current.x,(d.isRelativeCommand()?d.current.y:0)+d.getScalar());d.addMarker(P,d.current),d.current=P,o(P.x,P.y),r.addPoint(d.current.x,d.current.y)}break;case"C":case"c":for(;!d.isCommandOrEnd();){var f=d.current,y=d.getPoint(),x=d.getAsControlPoint(),m=d.getAsCurrentPoint();d.addMarker(m,x,y),u(new MORPH.GEOM.Point(y.x,y.y),new MORPH.GEOM.Point(x.x,x.y),new MORPH.GEOM.Point(m.x,m.y)),r.addBezierCurve(f.x,f.y,y.x,y.y,x.x,x.y,m.x,m.y)}break;case"S":case"s":for(;!d.isCommandOrEnd();){var f=d.current,y=d.getReflectedControlPoint(),x=d.getAsControlPoint(),m=d.getAsCurrentPoint();d.addMarker(m,x,y),u(new MORPH.GEOM.Point(y.x,y.y),new MORPH.GEOM.Point(x.x,x.y),new MORPH.GEOM.Point(m.x,m.y)),r.addBezierCurve(f.x,f.y,y.x,y.y,x.x,x.y,m.x,m.y)}break;case"Q":case"q":for(;!d.isCommandOrEnd();){var f=d.current,x=d.getAsControlPoint(),m=d.getAsCurrentPoint();d.addMarker(m,x,x),u(new MORPH.GEOM.Point(y.x,y.y),new MORPH.GEOM.Point(x.x,x.y),new MORPH.GEOM.Point(m.x,m.y)),r.addQuadraticCurve(f.x,f.y,x.x,x.y,m.x,m.y)}break;case"T":case"t":for(;!d.isCommandOrEnd();){var f=d.current,x=d.getReflectedControlPoint();d.control=x;var m=d.getAsCurrentPoint();d.addMarker(m,x,x),u(new MORPH.GEOM.Point(y.x,y.y),new MORPH.GEOM.Point(x.x,x.y),new MORPH.GEOM.Point(m.x,m.y)),r.addQuadraticCurve(f.x,f.y,x.x,x.y,m.x,m.y)}break;case"A":case"a":for(;!d.isCommandOrEnd();){var f=d.current,O=d.getScalar(),v=d.getScalar(),w=d.getScalar()*(Math.PI/180),p=d.getScalar(),R=d.getScalar(),m=d.getAsCurrentPoint(),H=new MORPH.GEOM.Point(Math.cos(w)*(f.x-m.x)/2+Math.sin(w)*(f.y-m.y)/2,-Math.sin(w)*(f.x-m.x)/2+Math.cos(w)*(f.y-m.y)/2),C=Math.pow(H.x,2)/Math.pow(O,2)+Math.pow(H.y,2)/Math.pow(v,2);C>1&&(O*=Math.sqrt(C),v*=Math.sqrt(C));var E=(p==R?-1:1)*Math.sqrt((Math.pow(O,2)*Math.pow(v,2)-Math.pow(O,2)*Math.pow(H.y,2)-Math.pow(v,2)*Math.pow(H.x,2))/(Math.pow(O,2)*Math.pow(H.y,2)+Math.pow(v,2)*Math.pow(H.x,2)));isNaN(E)&&(E=0);var A=new MORPH.GEOM.Point(E*O*H.y/v,E*-v*H.x/O),G=new MORPH.GEOM.Point((f.x+m.x)/2+Math.cos(w)*A.x-Math.sin(w)*A.y,(f.y+m.y)/2+Math.sin(w)*A.x+Math.cos(w)*A.y),k=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},S=function(t,n){return(t[0]*n[0]+t[1]*n[1])/(k(t)*k(n))},N=function(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(S(t,n))},b=N([1,0],[(H.x-A.x)/O,(H.y-A.y)/v]),T=[(H.x-A.x)/O,(H.y-A.y)/v],V=[(-H.x-A.x)/O,(-H.y-A.y)/v],B=N(T,V);S(T,V)<=-1&&(B=Math.PI),S(T,V)>=1&&(B=0),0==R&&B>0&&(B-=2*Math.PI),1==R&&0>B&&(B+=2*Math.PI);var $=new MORPH.GEOM.Point(G.x+O*Math.cos((b+(b+B))/2),G.y+v*Math.sin((b+(b+B))/2));d.addMarkerAngle($,(b+(b+B))/2+(0==R?-1:1)*Math.PI/2),d.addMarkerAngle(m,b+B+(0==R?-1:1)*Math.PI/2),o($.x,$.y),o(m.x,m.y),r.addPoint(m.x,m.y)}break;case"Z":case"z":d.current=d.start,o(d.start.x,d.start.y)}this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),n=this.PathParser.getMarkerAngles(),e=[],i=0;i<t.length;i++)e.push([t[i],n[i]]);return e}},clonePaths:function(t){for(var n=[],e=0;e<t.length;e++)n.push(t[e]);return n}};
var MorphDrawer=function(r,t,h){function e(r){return r=Math.min(s.length-1,r),s[r]}this.shapeArr=new Array;var a=r,n=h||1,s=t||[new Color(0,0,0)];this.addShape=function(r){this.shapeArr.length>=a&&this.shapeArr.pop(),this.shapeArr.unshift(r)},this.draw=function(r){for(var t,h,s,i=this.shapeArr.length,o=0;i>o;o++){t=o/a,r.strokeWeight(n),s=e(o),r.stroke(s.r,s.g,s.b,s.a),h=this.shapeArr[o];for(var p=0;p<h.length;p++){var f=h.segmentCollection[p];f.draw(r)}}}};
MORPH.CanvasUtils={CreateBuffer:function(){var t=document.createElement("canvas"),i=t.getContext("2d");return{canvas:t,ctx:i,width:-1,height:-1,invalidated:!1,resize:function(t,i){return t&&i&&(t=Math.floor(t),i=Math.floor(i),this.width!==t||this.height!==i)?(this.canvas.width=t,this.canvas.height=i,this.width=t,this.height=i,!0):!1},clear:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},fill:function(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height)},getPixelRatio:function(){var t=window.devicePixelRatio||1,i=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,e=t/i;return e}}}};
var t="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){const t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};const e={CreateBuffer:function(){var t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:t,ctx:e,width:-1,height:-1,invalidated:!1,resizeToDisplaySize(){this.devicePixelRatio=this.getPixelRatio();const e=t.clientWidth*this.devicePixelRatio|0,s=t.clientHeight*this.devicePixelRatio|0;return(t.width!==e||t.height!==s)&&(t.width=this.width=e,t.height=this.height=s,!0)},resize:function(t,e){return!(!t||!e||(t=Math.floor(t),e=Math.floor(e),this.width===t&&this.height===e))&&(this.canvas.width=t,this.canvas.height=e,this.width=t,this.height=e,!0)},clear:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},fill:function(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height)},getPixelRatio:function(){return(window.devicePixelRatio||1)/(this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1)}}}},s={InterpolatePt:function(t,e,i){var h=t.x+(e.x-t.x)*i,n=t.y+(e.y-t.y)*i;return new s.Point(h,n)},Rectangle:function(t,e,i,h){this.x1=t,this.y1=e,this.w=i,this.h=h,this.width=function(){return this.w},this.height=function(){return this.h},this.scale=function(t,e){this.w=this.w*t,this.h=this.h*e},this.translate=function(t,e){this.x1+=t,this.y1+=e},this.clone=function(){return new s.Rectangle(this.x1,this.y1,this.w,this.h)}},Point:function(t,e){this.x=t||0,this.y=e||0,this.draw=function(t){t.ellipse(this.x,this.y,10,10)},this.clone=function(){return new s.Point(this.x,this.y)},this.equals=function(t){return this.x==t.x&&this.y==t.y},this.trace=function(){return"{"+this.x+","+this.y+"}"},this.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],s=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=s},this.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},this.Interpolate=function(t,e,i){var h=t.x+(e.x-t.x)*i,n=t.y+(e.y-t.y)*i;return new s.Point(h,n)},this.interpolate=function(t,e){var i=this.x+(t.x-this.x)*e,h=this.y+(t.y-this.y)*e;return new s.Point(i,h)},this.translate=function(t,e){var s=this.x+t,i=this.y+e;this.x=s,this.y=i}},RandomPoint:function(t,e){var i=Math.random()*t,h=Math.random()*e;return new s.Point(i,h)},Vector:function(t,e){this.x=t||0,this.y=e||0,this.Interpolate=function(t){return new s.Vector(this.x*t,this.y*t)},this.clone=function(){return new s.Vector(this.x,this.y)}}};class h{constructor(t,e,s,i){this.pt1=null!==t?{x:t.x,y:t.y}:{x:0,y:0},this.pt2=null!==s?{x:s.x,y:s.y}:{x:0,y:0},this.ctrl2=i||{x:s.x,y:s.y},this.ctrl1=e||{x:t.x,y:t.y}}interpolate(){}draw(t){t.bezier(this.pt1.x,this.pt1.y,this.ctrl1.x,this.ctrl1.y,this.ctrl2.x,this.ctrl2.y,this.pt2.x,this.pt2.y)}translate(t,e){this.pt1.x+=t,this.pt1.y+=e,this.pt2.x+=t,this.pt2.y+=e,this.ctrl1.x+=t,this.ctrl1.y+=e,this.ctrl2.x+=t,this.ctrl2.y+=e}scale(t,e,s){var i=(this.ctrl1.x-this.pt1.x)*t,h=(this.ctrl1.y-this.pt1.y)*e,n=(this.ctrl2.x-this.pt2.x)*t,r=(this.ctrl2.y-this.pt2.y)*e;this.pt1.x*=t,this.pt1.y*=e,this.pt2.x*=t,this.pt2.y*=e,this.ctrl1.x=this.pt1.x+i,this.ctrl1.y=this.pt1.y+h,this.ctrl2.x=this.pt2.x+n,this.ctrl2.y=this.pt2.y+r}clone(){return new h({x:this.pt1.x,y:this.pt1.y},{x:this.ctrl1.x,y:this.ctrl1.y},{x:this.pt2.x,y:this.pt2.y},{x:this.ctrl2.x,y:this.ctrl2.y})}}class n{constructor(t,e){this.origSeg=t,this.destSeg=e,this.ctrlV1=new s.Vector(this.destSeg.ctrl1.x-this.origSeg.ctrl1.x,this.destSeg.ctrl1.y-this.origSeg.ctrl1.y),this.ctrlV2=new s.Vector(this.destSeg.ctrl2.x-this.origSeg.ctrl2.x,this.destSeg.ctrl2.y-this.origSeg.ctrl2.y)}interpolate(t){var e=s.InterpolatePt(this.origSeg.pt1,this.destSeg.pt1,t),i=s.InterpolatePt(this.origSeg.pt2,this.destSeg.pt2,t),n=this.ctrlV1.Interpolate(t),r={x:n.x+this.origSeg.ctrl1.x,y:n.y+this.origSeg.ctrl1.y},a={x:(n=this.ctrlV2.Interpolate(t)).x+this.origSeg.ctrl2.x,y:n.y+this.origSeg.ctrl2.y};return new h(e,r,i,a)}}class r{constructor(t,e){this._origSegs=t||[],this._destSegs=e||[],this._heteromorphic=t.length!=e.length,this._maxLength=Math.max(this._origSegs.length,this._destSegs.length),this._segs,this._startSegs,this._endSegs,this._interSeg,this.init()}init(){this._destSegs.length>1?this._interSeg=new h(s.InterpolatePt(this._origSegs[0].pt1,this._destSegs[0].pt1,.5),null,s.InterpolatePt(this._origSegs[this._origSegs.length-1].pt2,this._destSegs[this._destSegs.length-1].pt2,.5),null):this._interSeg=this._destSegs[0].clone(),this._segs=this._startSegs=this.defineStartInterSegs()}defineStartInterSegs(){var t,e,i,r=[];i=this._interSeg.pt1;for(var a=0;a<this._origSegs.length;){t=(a+1)/this._origSegs.length,e={x:i.x,y:i.y},i=s.InterpolatePt(this._interSeg.pt1,this._interSeg.pt2,t);var o=new h(e,null,i,null);r.push(new n(this._origSegs[a],o)),a++}return r}defineEndInterSegs(){var t,e,i,r=[];i=this._interSeg.pt1;for(var a=0;a<this._destSegs.length;){t=(a+1)/this._destSegs.length,e={x:i.x,y:i.y},i=s.InterpolatePt(this._interSeg.pt1,this._interSeg.pt2,t);var o=new h(e,null,i,null);r.push(new n(o,this._destSegs[a])),a++}return r}interpolateHetero(t){return t>=.5?(this._endSegs||(this._endSegs=this.defineEndInterSegs(this._interSeg.pt1,this._destSegs)),this._segs=this._endSegs):this._segs=this._startSegs,t<.5?t/.5:(t-.5)/.5}translate(t,e){function s(t,e,s){var i=0;for(i=0;i<t.length;i++)t[i].translate(e,s)}s(this._origSegs,t,e),this._destSegs&&s(this._destSegs,t,e),this.init()}interpolate(t){var e=[];this._heteromorphic&&this._destSegs.length>1&&(t=this.interpolateHetero(t));for(var s=0;s<this._segs.length;s++)e.push(this._segs[s].interpolate(t));return e}}class a extends r{init(){if(this._segs=[],this._destSegs)for(var t=0;t<this._maxLength;t++)this._segs.push(new n(this._origSegs[t],this._destSegs[t]));else this._segs=this._origSegs}}class o{constructor(t){this.morphableGroups=t}}class l{constructor(t,e,s,i){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(t,e),this.addPoint(s,i)}scale(t){this.x2=this.x1+this.width()*t,this.y2=this.y1+this.height()*t}getX(){return this.x1}getY(){return this.y1}getWidth(){return this.x2-this.x1}getHeight(){return this.y2-this.y1}addPoint(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,null)}addY(t){this.addPoint(null,t)}addBoundingBox(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)}addQuadraticCurve(t,e,s,i,h,n){var r=t+2/3*(s-t),a=e+2/3*(i-e),o=r+1/3*(h-t),l=a+1/3*(n-e);this.addBezierCurve(t,e,r,o,a,l,h,n)}addBezierCurve(t,e,s,i,h,n,r,a){var o=[t,e],l=[s,i],c=[h,n],g=[r,a];this.addPoint(o[0],o[1]),this.addPoint(g[0],g[1]);for(var u=0;u<=1;u++){var d=function(t){return Math.pow(1-t,3)*o[u]+3*Math.pow(1-t,2)*t*l[u]+3*(1-t)*Math.pow(t,2)*c[u]+Math.pow(t,3)*g[u]},p=6*o[u]-12*l[u]+6*c[u],x=-3*o[u]+9*l[u]-9*c[u]+3*g[u],y=3*l[u]-3*o[u];if(0!=x){var _=Math.pow(p,2)-4*y*x;if(!(_<0)){var m=(-p+Math.sqrt(_))/(2*x);0<m&&m<1&&(0==u&&this.addX(d(m)),1==u&&this.addY(d(m)));var f=(-p-Math.sqrt(_))/(2*x);0<f&&f<1&&(0==u&&this.addX(d(f)),1==u&&this.addY(d(f)))}}else{if(0==p)continue;var P=-y/p;0<P&&P<1&&(0==u&&this.addX(d(P)),1==u&&this.addY(d(P)))}}}isPointInBox(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2}}const c={SVG:{getBoundingBox:function(t){var e=t.getElementsByTagName("svg")[0],i=e.attributes,h=c.SVG.getViewbox(e),n=h&&h[0]||c.SVG.getNodeValue(i,"x")||0,r=h&&h[1]||c.SVG.getNodeValue(i,"y")||0,a=h.length&&h[2]||c.SVG.getNodeValue(i,"width")||100,o=h.length&&h[3]||c.SVG.getNodeValue(i,"height")||100;return new s.Rectangle(n,r,a,o)},getNodeValue:function(t,e){return t[e]?parseInt(t[e].nodeValue):null},getViewbox:function(t){var e=t.getAttribute("viewBox");return e&&(e=(e=e.split(" ")).map(t=>parseInt(t))),e},getPaths:function(t){if(t.length)t.map(t=>t[i].getElementsByTagName("svg")[0])},getPathStrings:function(t){var e=[],s=t.getElementsByTagName("path");for(d=0;d<s.length;d++)e.push(s[d].getAttribute("d"));var i=t.getElementsByTagName("line");for(d=0;d<i.length;d++){var h=i[d].getAttribute("x1"),n=i[d].getAttribute("x2"),r=i[d].getAttribute("y1"),a=i[d].getAttribute("y2");e.push("M"+h+" "+r+" L"+n+" "+a)}var o=t.getElementsByTagName("polyline");for(d=0;d<o.length;d++){g=(g=(g=o[d].getAttribute("points")).replace(/\s\s+/g," ")).split(" ");for(var l="M"+(x=parseFloat(g.shift()))+" "+(y=parseFloat(g.shift()))+" ";g.length;)l+="L "+(x=parseFloat(g.shift()))+" "+(y=parseFloat(g.shift()))+" ";l=l.substr(0,l.length-2),e.push(l)}var c=t.getElementsByTagName("polygon");for(d=0;d<c.length;d++){var g;g=(g=(g=c[d].getAttribute("points")).replace(/\s\s+/g," ")).split(" ");for(l="M"+(x=parseFloat(g.shift()))+" "+(y=parseFloat(g.shift()))+" ";g.length;)l+="L "+(x=parseFloat(g.shift()))+" "+(y=parseFloat(g.shift()))+" ";l=l.substr(0,l.length-2),e.push(l)}for(var u=t.getElementsByTagName("rect"),d=0;d<u.length;d++){var p=u[d],x=parseFloat(p.getAttribute("x")),y=parseFloat(p.getAttribute("y")),_=parseFloat(p.getAttribute("width")),m=parseFloat(p.getAttribute("height"));l="M"+x+" "+y;l+="L"+(x+_)+" "+y+" ",l+="L"+(x+_)+" "+(y+m)+" ",l+="L"+x+" "+(y+m)+" ",l+="L"+x+" "+y,e.push(l)}return e},getPathStr:t=>t,getPolygonStr(t){}},PATH:{PathParser:function(t){var e=t||"";this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new s.Point(0,0),this.control=new s.Point(0,0),this.current=new s.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new s.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()?this.current:new s.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,s){null!=s&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(s)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}},ClonePaths:function(t){for(var e=[],s=0;s<t.length;s++)e.push(t[s]);return e}}};class g{constructor({name:t="",id:e="",d:s}){this.name=t,this.id=e,this._segs=[],this._points=[],this._rect,this._x=0,this._y=0,this._d=s,this._parse()}_addPoint(t,e){var i=new s.Point(t,e);this._isFirstPoint()||this._addLineSegment(this._getLastPoint(),i),this._points.push(i)}_addCurvedPoint(t,e,s){var i=this._getLastPoint();this._addSegment(i,t,s,e),this._points.push(s)}_addLineSegment(t,e){this._segs.push(new h(t,t,e,e))}_addSegment(t,e,s,i){this._segs.push(new h(t,e,s,i))}_getLastPoint(){return this._points[this._points.length-1].clone()}_isFirstPoint(){return 0==this._points.length}_parse(){var t=this._d,e=new l;t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2")).replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/(\.[0-9]*)(\.)/gm,"$1 $2")).replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"");var i=new c.PATH.PathParser(t);for(i.reset();!i.isEnd();)switch(i.nextCommand(),i.command){case"M":case"m":var h=i.getAsCurrentPoint();for(i.addMarker(h),this._addPoint(h.x,h.y),e.addPoint(h.x,h.y),i.start=i.current;!i.isCommandOrEnd();){h=i.getAsCurrentPoint();i.addMarker(h,i.start),this._addPoint(h.x,h.y),e.addPoint(h.x,h.y)}break;case"L":case"l":for(;!i.isCommandOrEnd();){var n=i.current;h=i.getAsCurrentPoint();i.addMarker(h,n),this._addPoint(h.x,h.y),e.addPoint(h.x,h.y)}break;case"H":case"h":for(;!i.isCommandOrEnd();){var r=new s.Point((i.isRelativeCommand()?i.current.x:0)+i.getScalar(),i.current.y);i.addMarker(r,i.current),i.current=r,this._addPoint(r.x,r.y),e.addPoint(i.current.x,i.current.y)}break;case"V":case"v":for(;!i.isCommandOrEnd();){r=new s.Point(i.current.x,(i.isRelativeCommand()?i.current.y:0)+i.getScalar());i.addMarker(r,i.current),i.current=r,this._addPoint(r.x,r.y),e.addPoint(i.current.x,i.current.y)}break;case"C":case"c":for(;!i.isCommandOrEnd();){var a=i.current,o=i.getPoint(),g=i.getAsControlPoint(),u=i.getAsCurrentPoint();i.addMarker(u,g,o),this._addCurvedPoint(new s.Point(o.x,o.y),new s.Point(g.x,g.y),new s.Point(u.x,u.y)),e.addBezierCurve(a.x,a.y,o.x,o.y,g.x,g.y,u.x,u.y)}break;case"S":case"s":for(;!i.isCommandOrEnd();){a=i.current,o=i.getReflectedControlPoint(),g=i.getAsControlPoint(),u=i.getAsCurrentPoint();i.addMarker(u,g,o),this._addCurvedPoint(new s.Point(o.x,o.y),new s.Point(g.x,g.y),new s.Point(u.x,u.y)),e.addBezierCurve(a.x,a.y,o.x,o.y,g.x,g.y,u.x,u.y)}break;case"Q":case"q":for(;!i.isCommandOrEnd();){a=i.current,g=i.getAsControlPoint(),u=i.getAsCurrentPoint();i.addMarker(u,g,g),this._addCurvedPoint(new s.Point(o.x,o.y),new s.Point(g.x,g.y),new s.Point(u.x,u.y)),e.addQuadraticCurve(a.x,a.y,g.x,g.y,u.x,u.y)}break;case"T":case"t":for(;!i.isCommandOrEnd();){a=i.current,g=i.getReflectedControlPoint();i.control=g;u=i.getAsCurrentPoint();i.addMarker(u,g,g),this._addCurvedPoint(new s.Point(o.x,o.y),new s.Point(g.x,g.y),new s.Point(u.x,u.y)),e.addQuadraticCurve(a.x,a.y,g.x,g.y,u.x,u.y)}break;case"A":case"a":for(;!i.isCommandOrEnd();){a=i.current;var d=i.getScalar(),p=i.getScalar(),x=i.getScalar()*(Math.PI/180),y=i.getScalar(),_=i.getScalar(),m=(u=i.getAsCurrentPoint(),new s.Point(Math.cos(x)*(a.x-u.x)/2+Math.sin(x)*(a.y-u.y)/2,-Math.sin(x)*(a.x-u.x)/2+Math.cos(x)*(a.y-u.y)/2)),f=Math.pow(m.x,2)/Math.pow(d,2)+Math.pow(m.y,2)/Math.pow(p,2);f>1&&(d*=Math.sqrt(f),p*=Math.sqrt(f));var P=(y==_?-1:1)*Math.sqrt((Math.pow(d,2)*Math.pow(p,2)-Math.pow(d,2)*Math.pow(m.y,2)-Math.pow(p,2)*Math.pow(m.x,2))/(Math.pow(d,2)*Math.pow(m.y,2)+Math.pow(p,2)*Math.pow(m.x,2)));isNaN(P)&&(P=0);var v=new s.Point(P*d*m.y/p,P*-p*m.x/d),w=new s.Point((a.x+u.x)/2+Math.cos(x)*v.x-Math.sin(x)*v.y,(a.y+u.y)/2+Math.sin(x)*v.x+Math.cos(x)*v.y),S=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},M=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(S(t)*S(e))},C=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(M(t,e))},b=C([1,0],[(m.x-v.x)/d,(m.y-v.y)/p]),A=[(m.x-v.x)/d,(m.y-v.y)/p],k=[(-m.x-v.x)/d,(-m.y-v.y)/p],N=C(A,k);M(A,k)<=-1&&(N=Math.PI),M(A,k)>=1&&(N=0),0==_&&N>0&&(N-=2*Math.PI),1==_&&N<0&&(N+=2*Math.PI);var T=new s.Point(w.x+d*Math.cos((b+(b+N))/2),w.y+p*Math.sin((b+(b+N))/2));i.addMarkerAngle(T,(b+(b+N))/2+(0==_?-1:1)*Math.PI/2),i.addMarkerAngle(u,b+N+(0==_?-1:1)*Math.PI/2),this._addPoint(T.x,T.y),this._addPoint(u.x,u.y),e.addPoint(u.x,u.y)}break;case"Z":case"z":i.current=i.start,this._addPoint(i.start.x,i.start.y)}}clone(){var t=new g({d:this._d});return t.setRectangle(this._rect.clone()),t.name=this.name,t}translate(t,e){this._x=t,this._y=e;for(var s=0;s<this._segs.length;s++){this._segs[s].translate(t,e)}this._rect.translate(t,e)}setScale(t,e){e=e||t;for(var i=0;i<this._segs.length;i++){this._segs[i].scale(t,e,new s.Point(0,0))}this._rect.scale(t,e)}setRectangle(t){this._rect=t}width(){return this._rect.width()}height(){return this._rect.height()}getSegments(){for(var t=[],e=0;e<this._segs.length;e++)t.push(this._segs[e].clone());return t}getPosition(){return new s.Point(this._x,this._y)}}const u={CachedPaths:{},LoadSVG:function(t){return t=Array.isArray(t)?t:[t],new Promise((function(e,s){var i=[];function h(s,h){i.push(h),u.CachedPaths[s]=h,t.length?n(t.shift()):e(i)}function n(t){if(u.CachedPaths.hasOwnProperty(t))h(t,u.CachedPaths[t]);else{var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&h(t,e.responseXML)},e.open("GET",t,!0),e.send()}}n(t.shift())}))}};class d{constructor(t){this.segmentCollection=t||[],this.length=this.segmentCollection.length}translate(t,e){for(var s=0;s<this.length;s++)this.segmentCollection[s].translate(t,e)}scale(t){for(var e=0;e<this.length;e++)this.segmentCollection[e].scale(t)}clone(){for(var t=[],e=0;e<this.length;e++)t.push(this.segmentCollection[e].clone());return new d(t)}}class p{constructor(t,e){e=e||{},this._paths=t,this._current=0,this._morphablePathCollection=[],this._ratio=0,this._startTime,this._duration=e.duration||1e3,this._delayTime=0,this._looping=e.looping||!1,this._numPaths=this._looping?this._paths.length+1:this._paths.length,this._completeCallback=e.onComplete,this._x=0,this._y=0,this.reset()}reset(){var t=0;if(this._numPaths>1)for(this._morphablePathCollection=[];this._morphablePathCollection.length<this._numPaths-1;){var e=x.createMorphablePath(this._paths[t].getSegments(),this._paths[(t+1)%this._paths.length].getSegments());this._morphablePathCollection.push(e),t++}else this._morphablePathCollection.push(this._paths[0])}start(t){return this._startTime=void 0!==t?t:window.performance.now(),this._startTime+=this._delayTime,x.add(this),this}update(t){var e=Math.max(0,Math.min(1,(t-this._startTime)/this._duration));return this.setRatio(e)?(null!=this._completeCallback&&this._completeCallback(),!!this._looping&&(this._startTime=void 0!==t?t:window.performance.now(),this._current=0,this._ratio=0,!0)):(this._current=Math.floor(e*this._paths.length),!0)}getCurrentPath(){return this._paths[this._paths.length-1]}setRatio(t){return this._ratio=t,this._numPaths>1?Math.floor(this._ratio*(this._numPaths-1))>=this._numPaths-1:this._ratio>=1}getCurrentRatio(){return this._ratio*(this._numPaths-1)-this._current}getCurrentMorphablePath(){if(this._current<this._morphablePathCollection.length)return this._morphablePathCollection[this._current];console.log("Error : something wrong here!")}getShape(){if(this._numPaths>1)return this.currentShape();var t=this._paths[0];return new d(t.getSegments())}currentShape(){for(var t=this.getCurrentMorphablePath().morphableGroups,e=this.getCurrentRatio(),s=t.length,i=[],h=0;h<s;h++){var n=t[h].interpolate(e);i=i.concat(n)}return new d(i)}onComplete(t){return this._onCompleteCallback=t,this}setScale(t){return this._paths.forEach((function(e){e.setScale(t)})),this.reset(),this}getWidth(){for(var t=0,e=0;e<this._paths.length;e++)this._paths[e].width()>t&&(t=this._paths[e].width());return t}getHeight(){for(var t=0,e=0;e<this._paths.length;e++)this._paths[e].height()>t&&(t=this._paths[e].height());return t}translate(t,e){return this._x+=t,this._y+=e,this._paths.forEach((function(s){s.translate(t,e)})),this.reset(),this}setOrigin(t,e){var s=this._x-t,i=this._y-e;return this._paths.forEach((function(t){t.translate(s,i)})),this.reset(),this}getX(){return this._x}getY(){return this._y}}const x=new class extends class{constructor(){this._morphs=[]}add(t){this._morphs.push(t)}update({time:e,deltaTime:s}){if(0===this._morphs.length)return!1;var i=0,h=this._morphs.length;for(e=void 0!==e?e:t();i<h;)this._morphs[i].update(e)?i++:(this._morphs.splice(i,1),h--);return!0}draw(t){for(var e=0,s=this._morphs.length;e<s;){this._morphs[e++].draw(t)}}clear(){this._morphs=[]}}{constructor(){super(),this.now=t,this.CanvasUtils=e,this.GEOM=s,this.Morph=p}LoadShapes(t){t.constructor!==Array&&(t=[t]);for(var e=[],s=0;s<t.length;s++)e.push(x.LoadShape(t[s]));return Promise.all(e)}LoadShape(t){return u.LoadSVG(t.concat()).then((function(t){return new Promise((function(e,s){for(var i=[],h=c.SVG.getBoundingBox(t[0]),n=0;n<t.length;n++)for(var r=t[n].getElementsByTagName("svg")[0].getAttribute("id"),a=c.SVG.getPathStrings(t[n]),o=0;o<a.length;o++){var l=new g({id:r+"_"+o,d:a[o]});l.setRectangle(h.clone()),i.push(l)}e(i)}))}))}createMorphablePath(t,e){for(var s=[],i=t.length,h=e.length,n=Math.min(i,h),l=0,c=0,g=0;g<n;g++){var u=[],d=[];if(h>i)for(l=g,u.push(t[l]);c*(i/h)<g+1&&c<h;)d.push(e[c]),c++;else for(c=g,d.push(e[c]);l*(h/i)<g+1&&l<i;)u.push(t[l]),l++;u.length!==d.length?s.push(new r(u,d)):s.push(new a(u,d))}return new o(s)}};export{x as SVGMORPH};